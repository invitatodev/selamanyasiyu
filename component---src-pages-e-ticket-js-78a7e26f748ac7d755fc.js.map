{"version":3,"sources":["webpack://gatsby-starter-hello-world/./src/hooks/useGuestData.js","webpack://gatsby-starter-hello-world/./src/hooks/useGuestCode.js","webpack://gatsby-starter-hello-world/./src/pages/e-ticket.js"],"names":["isCetak","data","guest","i","is_cetak","loading","refetch","location","useLocation","code","getQueryValue","decodeURIComponent","ETicket","codeEticket","useGuestCode","nameEticket","useGuestName","alreadyChecked","useRef","useState","value","setValue","isShowTicket","setIsShowTicket","useGuestData","handleCheckTicket","useCallback","tempValue","guestCode","toUpperCase","find","g","alert","window","assign","HOSTNAME","useEffect","length","current","setTimeout","minHeight","className","padding","isDirectLink","height","thickness","speed","emptyColor","color","size","margin"],"mappings":"2JAQA,IANA,SAAsBA,GAGpB,YAHqC,IAAjBA,OAAU,GAGvB,CAAEC,KAFSD,EAAUE,UAAa,SAACC,GAAD,MAAsB,SAAfA,EAAEC,YAAuBF,EAE/CG,SAAS,EAAOC,QAAS,gB,4KCUrD,MARA,WACE,IAAMC,GAAWC,mBACXC,GAAOC,OAAcH,EAAU,QAGrC,OAFkBI,mBAAmBF,I,8BCExB,SAASG,IACtB,IAAMC,EAAcC,IACdC,GAAcC,SACdC,GAAiBC,aAAO,GAE9B,GAA0BC,cAAS,IAA5BC,EAAP,KAAcC,EAAd,KACA,GAAwCF,eAAS,GAA1CG,EAAP,KAAqBC,EAArB,KAEA,GAA0BC,SAAlBvB,EAAR,EAAQA,KAAMI,EAAd,EAAcA,QAERoB,GAAoBC,kBACxB,SAACC,GACC,IAAMC,GAAaD,GAAaP,GAAOS,cACzB5B,EAAK6B,MAAK,SAACC,GAAD,OAAQA,EAAEtB,MAAQ,IAAIoB,gBAAkBD,KAG9DL,GAAgB,IAIlBS,MAAM,mBAAmBJ,EAApB,yCACLK,OAAO1B,SAAS2B,OAAOC,SAEzB,CAAClC,EAAMc,EAAaK,IAetB,OAVAgB,gBAAU,WACY,KAAhBvB,GAAsBZ,EAAKoC,OAAS,IAAMpB,EAAeqB,UAC3DrB,EAAeqB,SAAU,EACzBjB,EAASR,GACT0B,YAAW,WACTd,EAAkBZ,KACjB,QAEJ,CAACA,EAAaZ,EAAKoC,OAAQZ,EAAmBpB,KAG/C,QAAC,IAAD,MACE,QAAC,KAAD,CAAKmC,UAAU,UACb,eAAKC,UAAU,YACZnB,GACC,QAAC,KAAD,CAAKoB,QAAQ,MACX,QAAC,IAAD,CAAQC,cAAc,MAGxB,QAAC,IAAD,CAAQC,OAAO,UACb,QAAC,IAAD,CACEC,UAAU,MACVC,MAAM,QACNC,WAAW,WACXC,MAAM,gBACNC,KAAK,KACLC,OAAO","file":"component---src-pages-e-ticket-js-78a7e26f748ac7d755fc.js","sourcesContent":["import guest from '../api/guest-data.json';\n\nfunction useGuestData(isCetak = false) {\n  const finalData = isCetak ? guest.filter((i) => i.is_cetak === 'TRUE') : guest;\n\n  return { data: finalData, loading: false, refetch: () => { } };\n}\n\nexport default useGuestData;\n","import { useLocation } from '@reach/router';\nimport getQueryValue from '@invitato/helpers/dist/getQueryStringValue';\n\n/**\n * Custom hook to return GuestName\n * @return {string}\n */\nfunction useGuestCode() {\n  const location = useLocation();\n  const code = getQueryValue(location, 'code');\n  const finalCode = decodeURIComponent(code);\n\n  return finalCode;\n}\n\nexport default useGuestCode;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Box, Spinner, Center } from '@chakra-ui/react';\n\nimport MainLayout from '@components/Layout';\nimport QRCard from '@components/Common/QRCard/V2';\n\nimport useGuestData from '@/hooks/useGuestData';\nimport useGuestCode from '@/hooks/useGuestCode';\nimport useGuestName from '@/hooks/useGuestName';\n\nimport { HOSTNAME } from '@/constants';\n\nexport default function ETicket() {\n  const codeEticket = useGuestCode();\n  const nameEticket = useGuestName();\n  const alreadyChecked = useRef(false);\n\n  const [value, setValue] = useState('');\n  const [isShowTicket, setIsShowTicket] = useState(false);\n\n  const { data, loading } = useGuestData();\n\n  const handleCheckTicket = useCallback(\n    (tempValue) => {\n      const guestCode = (tempValue || value).toUpperCase();\n      const guest = data.find((g) => (g.code || '').toUpperCase() === guestCode);\n\n      if (guest) {\n        setIsShowTicket(true);\n        return;\n      }\n\n      alert(`Maaf, Kode data ${guestCode} tidak ditemukan. Mohon di cek lagi..`);\n      window.location.assign(HOSTNAME);\n    },\n    [data, nameEticket, value],\n  );\n  /**\n   * Effect to autu-check code ticket\n   */\n  useEffect(() => {\n    if (codeEticket !== '' && data.length > 0 && !alreadyChecked.current) {\n      alreadyChecked.current = true;\n      setValue(codeEticket);\n      setTimeout(() => {\n        handleCheckTicket(codeEticket);\n      }, 1000);\n    }\n  }, [codeEticket, data.length, handleCheckTicket, loading]);\n\n  return (\n    <MainLayout>\n      <Box minHeight=\"100vh\">\n        <div className=\"homepage\">\n          {isShowTicket ? (\n            <Box padding=\"0\">\n              <QRCard isDirectLink={false} />\n            </Box>\n          ) : (\n            <Center height=\"100vh\">\n              <Spinner\n                thickness=\"4px\"\n                speed=\"0.65s\"\n                emptyColor=\"gray.200\"\n                color=\"mainColorText\"\n                size=\"xl\"\n                margin=\"auto\"\n              />\n            </Center>\n          )}\n        </div>\n      </Box>\n    </MainLayout>\n  );\n}\n"],"sourceRoot":""}